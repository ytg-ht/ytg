<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrainRotter â€” Shorts Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="light">
  <div id="app">
    <header class="header">
      <div class="branding">
        <div class="logo">BrainRotter</div>
        <div class="subtitle">Relatable â€¢ Petty â€¢ Viral-ready Shorts</div>
      </div>

      <div class="header-controls">
        <label>Layout
          <select id="layoutSelect" class="select">
            <option value="split">Top video / Bottom captions</option>
            <option value="overlay">Full-screen caption overlay</option>
          </select>
        </label>
        <button id="helpBtn" class="btn">Help</button>
      </div>
    </header>

    <main class="main">
      <section class="left">
        <div class="phone" id="phonePreview">
          <canvas id="renderCanvas" width="1080" height="1920"></canvas>

          <div class="overlay-ui">
            <div class="top-row">
              <label class="file-btn">Upload Clip
                <input id="videoUpload" type="file" accept="video/*" />
              </label>

              <select id="demoClipSelect" class="select">
                <option value="">Demo loops</option>
                <option value="slime">Satisfying slime</option>
                <option value="cut">Crisp loop</option>
              </select>

              <button id="randomizeBtn" class="btn tiny">ðŸŽ²</button>
            </div>

            <div id="divider" class="divider" title="Drag to resize"></div>

            <div class="caption-panel">
              <textarea id="storyPrompt" placeholder="Edit story or press New Story"></textarea>

              <div class="caption-controls">
                <label>Font
                  <select id="fontSelect" class="select">
                    <option>Inter</option><option>Impact</option><option>Arial</option><option>Georgia</option><option>Courier New</option>
                  </select>
                </label>

                <label>Color
                  <input type="color" id="fontColor" value="#111827" />
                </label>

                <label>Anim
                  <select id="animSelect" class="select">
                    <option value="static">Static</option><option value="bounce">Bounce</option><option value="zoom">Zoom</option><option value="shake">Shake</option>
                  </select>
                </label>

                <label>Size
                  <input id="fontSize" type="range" min="28" max="120" value="56" />
                </label>

                <label>Emoji
                  <input id="emojiInput" placeholder="Add emoji (e.g. ðŸ’€,ðŸ”¥)" />
                </label>
              </div>

              <div class="caption-actions">
                <select id="categoryFilter" class="select"><option value="any">Any genre</option></select>
                <select id="lengthFilter" class="select"><option value="any">Any length</option><option value="short">Short</option><option value="medium">Medium</option><option value="long">Long</option></select>

                <button id="newStoryBtn" class="btn primary">New Story</button>
                <button id="regenBtn" class="btn">Regenerate</button>
                <button id="ttsBtn" class="btn">ðŸ”Š Preview Voice</button>
              </div>
            </div>

            <img id="revealImg" class="reveal" alt="reveal" />
          </div>
        </div>

        <div class="controls-row">
          <label class="small">Upload voice (optional)
            <input id="audioUpload" type="file" accept="audio/*" />
          </label>

          <button id="recordBtn" class="btn">Record Mic</button>
          <button id="stopRecBtn" class="btn" disabled>Stop</button>

          <label class="small">MP4 convert
            <input id="useMp4" type="checkbox" />
          </label>

          <button id="exportBtn" class="btn primary">Export Video</button>
        </div>
      </section>

      <aside class="right">
        <h3>Editor</h3>

        <label>Voice (preview)
          <select id="voiceSelect" class="select"></select>
        </label>

        <label>Playback rate
          <input id="playbackRate" type="range" min="0.6" max="1.6" step="0.1" value="1" />
        </label>

        <fieldset class="options">
          <legend>Options</legend>
          <label><input id="toggleWatermark" type="checkbox" checked/> Watermark</label>
          <label><input id="toggleRevealAudio" type="checkbox" checked/> Reveal sound</label>
          <label><input id="randomClipsAllowed" type="checkbox" checked/> Use demo clips</label>
        </fieldset>

        <h4>Effects</h4>
        <label><input type="checkbox" id="fxGlitch"/> Glitch</label>
        <label><input type="checkbox" id="fxZoom"/> Zoom</label>
        <label><input type="checkbox" id="fxBass"/> Meme bass</label>

        <hr />
        <div class="notes muted">
          Export creates a `.webm`. MP4 conversion loads ffmpeg.wasm (optional & slower). For reliable embedded audio, upload or record audio before exporting.
        </div>
      </aside>
    </main>

    <footer class="footer">Â© BrainRotter 2025</footer>
  </div>

  <script src="stories.js" defer></script>
  <script src="script.js" defer></script>
</body>
</html>
