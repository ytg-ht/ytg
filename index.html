<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrainRotter â€” Shorts Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="light">

  <div id="app">
    <header class="header">
      <div class="brand">
        <div class="logo">BrainRotter</div>
        <div class="tag">Light-mode Â· Viral Shorts Â· Fully configurable</div>
      </div>

      <div class="top-controls">
        <label class="small">Theme
          <select id="themeSelect">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </label>

        <label class="small">Export MP4 (optional)
          <input id="useMp4" type="checkbox" />
        </label>

        <button id="helpBtn" class="btn">Help</button>
      </div>
    </header>

    <main class="content">
      <section class="left-panel">
        <div class="phone-frame">
          <canvas id="renderCanvas" width="1080" height="1920"></canvas>

          <!-- Overlay UI inside preview -->
          <div class="overlay">

            <div class="overlay-top">
              <label class="btn small file-btn">Upload Clip
                <input id="videoUpload" type="file" accept="video/*" />
              </label>

              <select id="demoClips" class="select">
                <option value="">Demo loops</option>
                <option value="slime">Satisfying slime</option>
                <option value="cut">AI-cut looping</option>
              </select>

              <label class="small">Randomize
                <button id="randomizeAll" class="btn tiny">ðŸŽ²</button>
              </label>
            </div>

            <div id="divider" class="divider" title="Drag to resize"></div>

            <div class="caption-panel">
              <textarea id="storyPrompt" rows="3" placeholder="Edit story prompt here or press New Story"></textarea>

              <div class="caption-controls">
                <label>Font
                  <select id="fontSelect" class="select">
                    <option>Inter</option>
                    <option>Impact</option>
                    <option>Arial</option>
                    <option>Georgia</option>
                    <option>Courier New</option>
                  </select>
                </label>

                <label>Color
                  <input type="color" id="fontColor" value="#000000" />
                </label>

                <label>Anim
                  <select id="animSelect" class="select">
                    <option value="static">Static</option>
                    <option value="bounce">Bounce</option>
                    <option value="zoom">Zoom</option>
                    <option value="shake">Shake</option>
                  </select>
                </label>

                <label>Size
                  <input id="fontSize" type="range" min="28" max="120" value="56" />
                </label>

                <label class="small">Emoji
                  <input id="emojiInput" placeholder="Add emoji (e.g. ðŸ’€,ðŸ”¥)" />
                </label>
              </div>

              <div class="caption-actions">
                <button id="newStory" class="btn primary">New Story</button>
                <button id="regenerate" class="btn">Regenerate</button>
                <button id="ttsPlay" class="btn">ðŸ”Š Preview Voice</button>
              </div>
            </div>

            <!-- reveal image -->
            <img id="revealImg" class="reveal" alt="reveal" />

          </div>
        </div>

        <div class="phone-actions">
          <label class="small">Upload voice (optional)
            <input id="audioUpload" type="file" accept="audio/*" />
          </label>

          <button id="recordBtn" class="btn">Record Mic</button>
          <button id="stopRecBtn" class="btn" disabled>Stop</button>

          <button id="exportBtn" class="btn primary">Export Video</button>
        </div>
      </section>

      <aside class="right-panel">
        <h3>Editor Controls</h3>

        <label>Category
          <select id="categorySelect" class="select"></select>
        </label>

        <label>Voice (SpeechSynthesis)
          <select id="voiceSelect" class="select"></select>
        </label>

        <label>Playback Rate
          <input id="playbackRate" type="range" min="0.6" max="1.6" step="0.1" value="1" />
        </label>

        <fieldset class="options">
          <legend>Customization</legend>
          <label><input id="toggleWatermark" type="checkbox" checked/> Watermark</label>
          <label><input id="toggleRevealAudio" type="checkbox" checked/> Auto reveal sound</label>
          <label><input id="allowRandomClips" type="checkbox" checked/> Allow built-in demo clips</label>
        </fieldset>

        <h4>Effects (user can toggle)</h4>
        <label><input type="checkbox" id="fx_glitch"/> Glitch</label>
        <label><input type="checkbox" id="fx_zoom"/> Zoom spam</label>
        <label><input type="checkbox" id="fx_bass"/> Meme bass</label>

        <hr />

        <div class="notes">
          <strong>Export:</strong> default `.webm` (fast). MP4 conversion uses ffmpeg.wasm and is optional.
          <p class="muted">SpeechSynthesis preview plays the AI voice in your browser. To embed voice into exported video reliably, upload an audio file or record your voice â€” the exporter merges audio & canvas client-side.</p>
        </div>
      </aside>
    </main>

    <footer class="footer">Â© 2025 BrainRotter â€” built for viral chaos</footer>
  </div>

  <!-- Data + App -->
  <script src="stories.js"></script>
  <script src="memes.js"></script>
  <script src="script.js"></script>
</body>
</html>
