<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BrainRotter — Facts Shorts Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="light">
  <div id="app">
    <header class="header">
      <div class="branding">
        <div class="logo">BrainRotter</div>
        <div class="subtitle">7 facts / short • AI-voiced • Slime vibes</div>
      </div>
    </header>

    <main class="main">
      <section class="center">
        <div class="phone" id="phone">
          <video id="sourceVideo" playsinline muted loop style="display:none"></video>
          <canvas id="renderCanvas" width="1080" height="1920"></canvas>
          <img id="revealImg" class="reveal" alt="reveal" />
          <!-- captions overlay (DOM for crisp text & accessibility) -->
          <div id="captionOverlay" class="caption-overlay" aria-hidden="true"></div>
        </div>

        <div class="footer-hint">Preview: 1080 × 1920 — Click "Export" to download .webm with embedded audio (ElevenLabs recommended)</div>
      </section>

      <aside class="right">
        <div class="panel">
          <h3>Facts Builder</h3>

          <div class="row">
            <label>Facts per video
              <input id="factsCount" type="number" min="1" max="12" value="7" />
            </label>

            <label>Source
              <select id="factsSource">
                <option value="random">Random facts</option>
                <option value="science">Science</option>
                <option value="history">History</option>
                <option value="weird">Weird / Odd</option>
              </select>
            </label>
          </div>

          <textarea id="factsEditor" rows="8" placeholder="Facts appear here. Edit freely or press New Facts"></textarea>

          <div class="row">
            <label>Font
              <select id="fontSelect">
                <option>Inter</option><option>Impact</option><option>Arial</option><option>Georgia</option><option>Courier New</option>
              </select>
            </label>

            <label>Font size
              <input id="fontSize" type="range" min="32" max="88" value="56" />
            </label>
          </div>

          <div class="actions">
            <button id="newFactsBtn" class="btn primary">New Facts</button>
            <button id="randomizeBtn" class="btn">Randomize</button>
            <button id="previewCaptionsBtn" class="btn">Preview Captions</button>
          </div>

          <hr />

          <h3>AI Voice (quality)</h3>
          <div class="muted">Use ElevenLabs for best exports. Browser TTS as fallback.</div>

          <div class="row">
            <label>Provider
              <select id="voiceProvider">
                <option value="eleven">ElevenLabs (recommended)</option>
                <option value="browser">Browser TTS (fallback)</option>
              </select>
            </label>
          </div>

          <div id="elevenBox" style="display:block">
            <label>ElevenLabs API Key
              <input id="elevenApiKey" type="text" placeholder="paste your key here" />
            </label>
            <label>Voice ID
              <input id="elevenVoiceId" type="text" placeholder="e.g. 'alloy' or voice UUID" />
            </label>
            <div class="muted">Get an ElevenLabs API key & voice id. This page will fetch audio for each fact.</div>
            <button id="fetchTTSBtn" class="btn">Fetch TTS for current facts</button>
          </div>

          <div class="row">
            <label>Playback rate
              <input id="playbackRate" type="range" min="0.7" max="1.4" step="0.05" value="1" />
            </label>
            <label><input id="embedTTS" type="checkbox" checked /> Embed fetched audio in export</label>
          </div>

          <div class="actions">
            <button id="previewVoiceBtn" class="btn">Preview Voice Sync</button>
            <button id="exportBtn" class="btn primary">Export .webm</button>
          </div>

          <div class="muted small" style="margin-top:10px">
            Tip: For reliable exported voice, paste a valid ElevenLabs key & voice id and click "Fetch TTS". If no key is provided, browser TTS will be used for preview only.
          </div>
        </div>
      </aside>
    </main>

    <footer class="footer">© BrainRotter — facts mode</footer>
  </div>

  <script src="facts.js" defer></script>
  <script src="script.js" defer></script>
</body>
</html>
